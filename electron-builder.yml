appId: com.lyricvault.app
productName: LyricVault
copyright: Copyright (c) 2026

directories:
  output: release

asar: true

files:
  - electron/**/*
  - frontend/dist/**/*
  - package.json

extraResources:
  - from: backend/
    to: backend/
    filter:
      - "**/*"
      - "!venv/**"
      - "!__pycache__/**"
      - "!*.db"
      - "!downloads/**"
      - "!test_*.py"
      - "!check_*.py"
      - "!trigger_*.py"
      - "!**/logs"
      - "!**/logs/**"
      - "!**/.env"

  - from: python-embed/
    to: python-embed/
    filter:
      - "**/*"
  - from: ffmpeg/
    to: ffmpeg/
    filter:
      - "**/*"
  - from: assets/
    to: assets/
    filter:
      - "icon.ico"

win:
  target:
    - target: nsis
      arch:
        - x64
    - target: portable
      arch:
        - x64
  icon: assets/icon.ico
  artifactName: "LyricVault.${version}.${ext}"
  signAndEditExecutable: true
  forceCodeSigning: false

nsis:
  artifactName: "LyricVault.Setup.${version}.${ext}"
  oneClick: false
  perMachine: true
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: LyricVault
  installerHeader: "build/installerHeader.bmp"
  installerSidebar: "build/installerSidebar.bmp"
  include: "scripts/installer.nsh"
  warningsAsErrors: false
